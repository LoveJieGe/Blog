@model HxBlogs.Model.Blog
@{
    ViewBag.Title = Model.Title;
    string newArticle = Guid.NewGuid().ToString();
}
@section styles{
    @Styles.Render("~/content/blog")  
}
<div class="hx-container blog-view">
    <div class="d-flex">
        <aside class="d-flex flex-column blog-aside">
            <div class="d-inline-flex align-items-center mt-2 p-3 hx-white-content hx-aside-title">
                <div class="user-md-avater mr-2">
                    <a>
                        <img src="~/Content/Plugin/Metronic/image/avatar.png" />
                    </a>
                </div>
                <div class="mr-1">@(Model.User == null ? "" : (string.IsNullOrEmpty(Model.User.NickName) ? Model.User.UserName : Model.User.NickName))</div>
                <div class="ml-auto mr-2">
                    <button type="button" class="btn btn-outline-secondary btn-sm">关注</button>
                </div>
            </div>
            <div class="d-inline-flex justify-content-around  mb-1  p-3 hx-white-content">
                <div class="d-flex flex-column">
                    <span>园龄</span>
                    <span>100</span>
                </div>
                <div class="d-flex flex-column">
                    <span>粉丝</span>
                    <span>100</span>
                </div>
                <div class="d-flex flex-column">
                    <span>关注</span>
                    <span>100</span>
                </div>
                <div class="d-flex flex-column">
                    <span>访问</span>
                    <span>100</span>
                </div>
            </div>
            <div id="@newArticle" class="card my-1">
                
            </div>
            <div class="card my-1">
                <div class="card-header hx-card-header">
                    个人分类
                </div>
                <div class="card-body">

                </div>
            </div>
            <div class="card my-1">
                <div class="card-header hx-card-header">
                    热门文章
                </div>
                <div class="card-body">

                </div>
            </div>
        </aside>
        <div class="flex-fill flex-column mt-2 ml-3 py-3 px-4 hx-white-content">
            <div class="mt-2">
                <div>
                    <h4>@Model.Title</h4>
                </div>
                <div class="d-flex hx-light-content">
                    <span class="hx-text">@(Model.User == null || string.IsNullOrEmpty(Model.User.NickName) ? Model.UserName : Model.User.NickName)发布于</span>
                    <span class="hx-text mr-1">@WebHelper.GetDispayDate(Model.PublishDate, "yyyy-MM-dd")</span>
                    <span class="hx-text mx-1">阅读数:@Model.ReadCount</span>
                    <span class="hx-text mx-1">收藏:@Model.FavCount</span>
                    <span class="hx-text mx-1">点赞:@Model.LikeCount</span>
                    <div class="hx-text mx-1">
                        个人分类：
                        @if (ViewBag.BlogTag != null)
                        {
                            foreach (HxBlogs.Model.BlogTag tag in ViewBag.BlogTag)
                            {
                                <a href="@WebHelper.GetFullUrl("/article/tag/"+tag.UserName+"/"+Hx.Common.Helper.Helper.ToHex(tag.Id))">@tag.Name</a>
                            }
                        }
                    </div>
                </div>
            </div>
            <div class="mt-4 blog-content">
                @(new HtmlString(Model.ContentHtml))
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        $(function () {
            var $newArticle = $('#@newArticle');
            HxCore.ajax('/article/loadnewarticle', {
                maskTarget: $newArticle,
                success(data) {
                    debugger
                    $newArticle.html(data);
                }
            });
        });
    </script>
}
